{"version":3,"file":"sections.search.js","mappings":"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","sources":["webpack://erstwilder/webpack/runtime/chunk loaded","webpack://erstwilder/./scripts/tools/constants/classes.ts","webpack://erstwilder/./scripts/tools/utilities/string-tools.ts","webpack://erstwilder/./scripts/tools/utilities/error.ts","webpack://erstwilder/./scripts/tools/utilities/event-tools.ts","webpack://erstwilder/./scripts/objects/product/ProductThumbnail.ts","webpack://erstwilder/webpack/bootstrap","webpack://erstwilder/webpack/runtime/global","webpack://erstwilder/webpack/runtime/hasOwnProperty shorthand","webpack://erstwilder/webpack/runtime/runtimeId","webpack://erstwilder/webpack/runtime/jsonp chunk loading","webpack://erstwilder/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","export const CLASS_ACTIVE = 'is-active';\nexport const CLASS_OPEN = 'is-open';\nexport const CLASS_CLOSED = 'is-closed';\nexport const CLASS_HIDDEN = 'is-hidden';\nexport const CLASS_VISIBLE = 'is-visible';\nexport const CLASS_FADE_IN = 'is-fade-in';\nexport const CLASS_FADE_OUT = 'is-fade-out';\nexport const CLASS_STICKY = 'is-sticky';\nexport const CLASS_WAITING = 'is-waiting';\nexport const CLASS_FIXED = 'is-fixed';\nexport const CLASS_STUCK = 'is-stuck';\nexport const CLASS_UNAVAILABLE = 'is-unavailable';\nexport const CLASS_SELECTED = 'is-selected';\nexport const CLASS_DISABLED = 'is-disabled';\nexport const CLASS_SCROLL_DISABLED = 'is-scroll-disabled';\nexport const CLASS_HAS_ERROR = 'has-error';\nexport const CLASS_MENU_TOGGLE = 'is-menu-open';\nexport const CLASS_INITIALISED = 'is-initialised';\nexport const CLASS_SOLD_OUT = 'is-sold-out';\nexport const CLASS_PENDING = 'is-pending';\nexport const CLASS_FILTERED = 'is-filtered';\nexport const CLASS_lOADING = 'is-loading';\nexport const CLASS_DRAWER_OPEN = 'is-drawer-open';\nexport const CLASS_CART_PENDING = 'is-cart-pending';\nexport const CLASS_OVERLAY_OPEN = 'has-overlay-open';","/**\n * Truncate Words\n * @param words The string of words to truncate\n * @param limit The number of words to limit the truncation to\n * @param after A optional string to place at the end of the truncation\n */\nexport const truncateWords = (words:string, limit:number, after?:string) => {\n  if(!words || !limit) return;\n\n  // Clean words\n  words = words.trim();\n\n  // Break words by spaces\n  let wordsArray = words.split(' ');\n\n  // Get original words count\n  let originalCount = wordsArray.length;\n\n  // Truncate words array\n  wordsArray = wordsArray.slice(0, limit);\n\n  // Get the truncated count\n  let truncatedCount = wordsArray.length;\n\n  // Only show the after string if the words string was truncated\n  let showAfter = after && (truncatedCount < originalCount);\n\n  // Put it back together again\n  words = `${wordsArray.join(' ')}${showAfter ? after : ''}`;\n\n  return words\n}\n\n/**\n *  Handlize\n *    Takes in a string and converts it to a Shopify formatted handle\n *\n * @param {string} s String to handlize\n * @returns {string} Handle\n */\nexport const handlize = (s:string) => {\n  let str = s.toLowerCase();\n  ['\"', \"'\", \"\\\\\", \"(\", \")\", \"[\", \"]\"].forEach(e => str = str.replace(e, ''));\n\n  str = str.replace(/\\W+/g, \"-\");\n\n  while(str.startsWith('-')) str = str.substr(1);\n  while(str.endsWith('-')) str = str.slice(0, -1);\n\n  return str;\n}\n\n/**\n *  Liquid\n *    Takes in a string containing liquid-like variables e.g. {{ test }} and\n *    replaces them with the variables provided\n *\n * @param {string} str The liquid string\n * @param {object} vars The variables to replace\n * @returns {string} The formatted string\n */\n export const liquid = (str:string, vars:{[key:string]:string}={}) => {\n  let keys = Object.keys(vars);\n  let keysLower = keys.map(k => k.toLowerCase());\n\n  return str.replace(/({)?{{[^{}]*}}(?!})/g, function($0, $1){\n    let x = $0.replace(/[\\{|\\s|\\}]/g, '');\n    if(!x) return $0;\n\n    //Lowercaseify\n    x = x.toLowerCase();\n\n    let keyIndex = keysLower.findIndex(k => k == x);\n    if(keyIndex === -1) return $0;\n    return vars[keys[keyIndex]];\n  });\n}\n\nexport const t = (key:string, variables:{[key:string]:string}={}) => {\n  let str;\n\n  //Try find\n  //@ts-ignore\n  if(window && window['Language'] && window['Language'].strings) {\n    //@ts-ignore\n    str = window['Language'].strings[key];\n  }\n  if(!str || !str.length) return `translation missing: ${key}`;\n  return liquid(str, variables);\n}","const ERROR_LIST = <const>{\n  unknown: 'ERROR_UNKNOWN',\n  allInCart: 'ERROR_ALL_IN_CART'\n};\n\ntype ErrorList = (typeof ERROR_LIST);\ntype ShopifyAjaxErrorLookup<T extends keyof ErrorList> = ErrorList[T];\n\nexport const shopifyAjaxErrorGet = (e:any) => {\n  let error:(keyof ErrorList) = 'unknown';\n\n  if(e && e.description) {\n    if(e.description.startsWith('All') && e.description.endsWith('in your cart.')) {\n      error = 'allInCart';\n    }\n  }\n\n  return ERROR_LIST[error] as ShopifyAjaxErrorLookup<typeof error>;\n}","/**\n * This callback is displayed as a global member.\n * @callback eventCallback\n * @param {object} event Event callback\n * @param {HTMLElement} target Event target\n */\n\n/**\n * Properties for delegating events\n * @typedef {Object} DelegateParams\n * @property {HTMLElement} element - Element to attach the event listener to\n * @property {string} event Event to listen for\n * @property {string} selector Selector to listen for events on\n * @property {eventCallback} callback Event Callback Function\n */\ninterface DelegateParams<K extends keyof HTMLElementEventMap, E extends HTMLElement> {\n  element:HTMLElement|string;\n  selector:string;\n  callback:(event:HTMLElementEventMap[K], target:E)=>any\n  event:K;\n};\n\n\n/**\n * Attaches an event listener to an ancestor node to listen for events on the\n * children nodes.\n *\n * @param {DelegateParams} params Information about the event listener\n * @returns {void} A function to remove the attached event listener\n */\nexport const delegate = <K extends keyof HTMLElementEventMap, E extends HTMLElement>(params:DelegateParams<K,E>) => {\n  const { element, selector, event, callback } = params;\n\n  const internalCallback = (event:HTMLElementEventMap[K]) => {\n    if(!event.target ||\n      !(event.target instanceof HTMLElement || event.target instanceof SVGElement) ||\n      typeof event.target['matches'] === typeof undefined\n    ) return;\n\n    let target = event.target.matches(selector) ? event.target as E : (\n      event.target.closest<E>(selector)\n    );\n    if(!target) return;\n    callback(event, target);\n  };\n\n  let elem = typeof element === 'string' ? (\n    document.querySelector<E>(element)\n  ) : element;\n  if(!elem) return null;\n\n  elem.addEventListener(event, internalCallback);\n  return () => elem && elem.removeEventListener(event, internalCallback);\n};\n\n/**\n *\n * @param {Event} e - Event to find target from\n * @param {string} selector - Selector string to find target with\n */\nexport const findTarget = (e:Event, selector:string) => {\n  if(!e.target ||\n    !(e.target instanceof HTMLElement || e.target instanceof SVGElement) ||\n    typeof e.target['matches'] === typeof undefined\n  ) return null;\n\n  const target = e.target.matches(selector) ? e.target as HTMLElement : (\n    e.target.closest<HTMLElement>(selector)\n  );\n  return target;\n}","/*\n *  Product Thumbnail\n *    Script for the product thumbnail\n *\n *  Version:\n *    1.0.0 - 2020/11/22\n */\nimport { CLASS_DISABLED, CLASS_INITIALISED, CLASS_PENDING } from \"../../tools/constants/classes\";\nimport { t } from \"../../tools/utilities/string-tools\";\nimport { shopifyAjaxErrorGet } from \"../../tools/utilities/error\";\nimport { Product } from \"../../tools/product/product\";\nimport { Variant } from \"../../tools/product/variant\";\nimport { findTarget } from \"../../tools/utilities/event-tools\";\nimport { cartAdd, getCountOfVariantInCart } from \"@process-creative/slate-theme-tools\";\n\n// Attributes\nconst ATTR_VARIANT_ID = 'data-variant-id';\n\n// Selectors\nconst SELECTOR_THUMBNAIL = '[data-product-thumbnail]';\nconst SELECTOR_PRODUCT_JSON = '[data-product-json]';\nconst SELECTOR_ATC_BUTTON = '[data-product-thumbnail-add-btn]';\nconst SELECTOR_ATC_BUTTON_LABEL = '[data-product-thumbnail-add-btn-label]';\n\n// Classes\nconst CLASS_ADDED = 'is-added'\n\n// Language Strings\nconst STR_IN_CART = t('products.product.added_to_cart');\nconst STR_ALL = t('products.product.all_in_cart');\nconst STR_PENDING = t('products.product.cart_pending');\nconst STR_ADDED = t('products.product.added_to_cart');\nconst STR_SOLD_OUT = t('products.product.sold_out');\nconst STR_ERROR = t('products.product.error');\nconst STR_ADD = t('products.product.add_to_cart');\n\nconst COOLDOWN_ADDED = 2000;\n\n// Errors\nconst ERROR_NO_JSON = `Attempted to load the variant selector, however there is no ${SELECTOR_PRODUCT_JSON} found in this thumbnail.`;\nconst ERROR_NO_VARIANT_ID = `Thumbnail has no variant id set, no ${ATTR_VARIANT_ID} found on this thumbnail.`;\nconst ERROR_NO_VARIANT = `Unable to find variant matching %1% on this product. Incorrect variant id may have been set.`;\n\nexport class ProductThumbnail {\n  container: HTMLElement;\n  atcButtons: NodeListOf<HTMLButtonElement>|null;\n  pending: boolean;\n  disabled: boolean;\n  variantId: number|null;\n  product: Product;\n  variant: Variant|undefined;\n\n  constructor(container:HTMLElement) {\n    this.container = container;\n    this.pending = false;\n    this.disabled = false;\n    this.variantId = null;\n\n    // Get the product json\n    const jsonElement = container.querySelector<HTMLScriptElement>(SELECTOR_PRODUCT_JSON);\n    if(!jsonElement) throw new Error(ERROR_NO_JSON);\n\n    // Set the product object\n    this.product = JSON.parse(jsonElement.innerHTML);\n\n    // Set the variant id\n    const variantIdString = container.getAttribute(ATTR_VARIANT_ID);\n    if(!variantIdString) throw new Error(ERROR_NO_VARIANT_ID);\n    this.variantId = parseInt(variantIdString);\n\n    // Set the variant object\n    this.variant = this.product.variants.find(v => v.id == this.variantId);\n    if(!this.variant) throw new Error(ERROR_NO_VARIANT.replace('%1%', variantIdString));\n\n    // Add to cart button\n    this.atcButtons = container.querySelectorAll(SELECTOR_ATC_BUTTON);\n    if(this.atcButtons) {\n      this.atcButtons.forEach(button => {\n        button.addEventListener('click', (e) => this.addProduct(e));\n      });\n    }    \n  }\n\n  async updateButton(e:Event) {\n    if(!this.variant || !this.variantId) return;\n\n    const atcButton = findTarget(e, SELECTOR_ATC_BUTTON);\n    if(!atcButton) return;\n\n    const atcButtonLabel = atcButton.querySelector<HTMLElement>(SELECTOR_ATC_BUTTON_LABEL);\n    if(!atcButtonLabel) return;\n\n    const {\n      available, inventory_policy, inventory_management, inventory_quantity\n    } = this.variant;\n    const inCart = await getCountOfVariantInCart(this.variantId);\n\n    if(available && inventory_quantity) {\n      if(\n        inventory_policy != 'continue' &&\n        inventory_management != null &&\n        (inventory_quantity - inCart) <= 0\n      ) {\n        this.disabled = true;\n        atcButton.classList.add(CLASS_DISABLED);\n        atcButton.setAttribute('disabled', 'disabled');\n        atcButtonLabel.innerText = STR_ALL;\n      } else {\n        this.disabled = false;\n        atcButton.classList.remove(CLASS_DISABLED);\n        atcButton.removeAttribute('disabled');\n        atcButtonLabel.innerText = STR_IN_CART;\n        atcButton.classList.add(CLASS_ADDED);\n      }\n    } else {\n      this.disabled = true;\n      atcButton.classList.add(CLASS_DISABLED);\n      atcButton.setAttribute('disabled', 'disabled');\n      atcButtonLabel.innerText = STR_SOLD_OUT;\n    }\n  }\n\n  async addProduct(e:Event) {\n    e.preventDefault();\n    if(this.disabled || this.pending || !this.variantId) return;\n\n    const atcButton = findTarget(e, SELECTOR_ATC_BUTTON);\n    if(!atcButton) return;\n\n    const atcButtonLabel = atcButton.querySelector<HTMLElement>(SELECTOR_ATC_BUTTON_LABEL);\n    if(!atcButtonLabel) return;\n\n    // Disable button\n    this.disabled = true;\n    atcButton.setAttribute('disabled', 'disabled');\n    atcButton.classList.add(CLASS_DISABLED);\n\n    // Attempt to add to cart\n    try {\n      // Start pending\n      this.pending = true;\n      atcButton.classList.add(CLASS_PENDING);\n      atcButtonLabel.innerText = STR_PENDING;\n\n      await cartAdd({ items: [{ id: this.variantId, quantity: 1 }] });\n\n      atcButtonLabel.innerText = STR_ADDED;\n    } catch (e:any) {\n      const err = shopifyAjaxErrorGet(e);\n      if(err != 'ERROR_ALL_IN_CART') {\n        atcButtonLabel.innerText = STR_ERROR;\n      } else {\n        this.updateButton(e);\n      }\n      console.error(e);\n    }\n\n    await new Promise(resolve => setTimeout(resolve, COOLDOWN_ADDED));\n\n    // Stop pending\n    this.pending = false;\n    atcButton.classList.remove(CLASS_PENDING);\n    this.updateButton(e);\n  }\n}\n\n// Initialise thumbnails\nexport const initialiseThumbnails = () => {\n  document.querySelectorAll<HTMLElement>(SELECTOR_THUMBNAIL).forEach(thumbnail => {\n    if(thumbnail.classList.contains(CLASS_INITIALISED)) return;\n    thumbnail.classList.add(CLASS_INITIALISED);\n\n    new ProductThumbnail(thumbnail);\n  });\n}\n\nexport const updateThumbnailButtons = (variantId: string) => {\n  const productThumbnails = document.querySelectorAll(SELECTOR_THUMBNAIL);\n  productThumbnails.forEach(thumbnail => {\n    let thumbnailVariantId = thumbnail.getAttribute(ATTR_VARIANT_ID);\n    if (variantId === thumbnailVariantId) {\n      let button = thumbnail.querySelector(SELECTOR_ATC_BUTTON);\n      let label = thumbnail.querySelector(SELECTOR_ATC_BUTTON_LABEL);\n      if (!button || !label) return;\n      button.classList.remove(CLASS_ADDED);\n      label.innerHTML = STR_ADD;\n    }\n  });\n}\n\ninitialiseThumbnails();","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.j = 447;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t447: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkerstwilder\"] = self[\"webpackChunkerstwilder\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [4736], function() { return __webpack_require__(6880); })\nvar __webpack_exports__ = __webpack_require__.O(undefined, [4736], function() { return __webpack_require__(62025); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","CLASS_DISABLED","CLASS_INITIALISED","CLASS_PENDING","liquid","str","vars","keys","Object","keysLower","map","k","toLowerCase","replace","$0","$1","x","keyIndex","findIndex","t","key","variables","window","strings","length","ERROR_LIST","unknown","allInCart","shopifyAjaxErrorGet","e","error","description","startsWith","endsWith","findTarget","selector","target","HTMLElement","SVGElement","matches","closest","ATTR_VARIANT_ID","SELECTOR_THUMBNAIL","SELECTOR_PRODUCT_JSON","SELECTOR_ATC_BUTTON","SELECTOR_ATC_BUTTON_LABEL","CLASS_ADDED","STR_IN_CART","STR_ALL","STR_PENDING","STR_ADDED","STR_SOLD_OUT","STR_ERROR","ERROR_NO_JSON","ERROR_NO_VARIANT_ID","ProductThumbnail","container","this","pending","disabled","variantId","jsonElement","querySelector","Error","product","JSON","parse","innerHTML","variantIdString","getAttribute","parseInt","variant","variants","find","v","id","atcButtons","querySelectorAll","forEach","button","addEventListener","addProduct","atcButton","atcButtonLabel","available","inventory_policy","inventory_management","inventory_quantity","getCountOfVariantInCart","inCart","classList","add","setAttribute","innerText","remove","removeAttribute","preventDefault","cartAdd","items","quantity","updateButton","console","Promise","resolve","setTimeout","document","thumbnail","contains","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","g","globalThis","Function","o","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","bind","push","__webpack_exports__"],"sourceRoot":""}